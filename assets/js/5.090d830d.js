(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{307:function(t,a,s){"use strict";s.r(a);var e=s(38),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"calculating-distances-handling-battles-overtakes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#calculating-distances-handling-battles-overtakes"}},[t._v("#")]),t._v(" Calculating Distances & Handling battles / overtakes")]),t._v(" "),s("p",[t._v("We need to combine this with the already existing methods to find a car close for battles.")]),t._v(" "),s("p",[t._v("Run after trackmediator move, here's what happens:")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("We sort the cars by on track position.")])]),t._v(" "),s("li",[s("p",[t._v("We either do it by telemetry")])]),t._v(" "),s("li",[s("p",[t._v("Save it into object")]),t._v(" "),s("ol",[s("li",[t._v("Calculate time difference\n"),s("ol",[s("li",[s("code",[t._v("difference = FD-PD = 50m")]),t._v(" "),s("code",[t._v("time delta = difference/PS = 50/90 = 0.5s")])])])]),t._v(" "),s("li",[t._v("Set entry number")]),t._v(" "),s("li",[t._v("Set laps")]),t._v(" "),s("li",[t._v("Set fastest lap (important for timed sessions)")])]),t._v(" "),s("h1",{attrs:{id:"handle-the-battles"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#handle-the-battles"}},[t._v("#")]),t._v(" Handle the battles")])])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("When a driver is within 6 seconds for 15 (& it's for position) this will also show up as an actual battle. \n")])])]),s("p",[t._v("When a car is within 6 seconds create a Battle object. These battle objects added / removed / kept every tick. if inside 6 seconds (no matter the order of the cars)")]),t._v(" "),s("p",[t._v("A = Car in front, B = Car behind")]),t._v(" "),s("ol",[s("li",[t._v("Check if car is within 2 seconds\n"),s("ol",[s("li",[t._v("depending on how much dirty air A gives, drop the downforce level of B. This will give it more speed on the straight, but a bit less speed in the corners and while braking.")]),t._v(" "),s("li",[t._v("Check if A is within 10 meters from B\n"),s("ol",[s("li",[t._v("Is how far is the apex?")]),t._v(" "),s("li",[t._v("Almost here?")]),t._v(" "),s("li",[t._v("BattleNegotiator\n"),s("ol",[s("li",[t._v("crash / mistake")]),t._v(" "),s("li",[t._v("overtake")]),t._v(" "),s("li",[t._v("time lost for both")]),t._v(" "),s("li",[t._v("time lost for one")]),t._v(" "),s("li",[t._v("back out and focus on exit")])])]),t._v(" "),s("li",[t._v("far away?\n"),s("ol",[s("li",[t._v("it's fine really lol.")])])])])])])])]),t._v(" "),s("div",{staticClass:"language-tsx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-tsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("carbattles")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    existingBattles"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    cars"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" CarBattle"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("HandleBattles")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cars")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("CarInBattleWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("carInFront"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" carInBack")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// check if CarF exists in this.cars, if so add carInBack and save him in the list too. ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CarBattle")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Entry")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("start "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("entries "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddCar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("car")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Add car to list")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("RemoveCar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("car")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Remove car")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If 1 car left destroy this battle.")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleBattle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Check algorithm mentioned above.")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//cars still in the battle")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bit of FP, why not.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("BattleNegotiator")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("carF"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" carB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" distance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" distanceToCorner"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" corner"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" speed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// calculate defence level for carF")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This is based on wether or not it's for position, the driver and his personality")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// and also most importantly the orders from it's team boss. ")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// will be put out in a number 0 is normal, -10 is a blue flag, -100 for a longer one")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The almost exact same counts for CarB but then attacking, -100 would only be from team orders ")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// or during a yellow flag, SC, w/e")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BattleNegotiator")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Negotiate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("car1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" car2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h1",{attrs:{id:"battlenegotiator-algorithm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#battlenegotiator-algorithm"}},[t._v("#")]),t._v(" BattleNegotiator algorithm")]),t._v(" "),s("ol",[s("li",[t._v("Calculate defense level for carF\n"),s("ol",[s("li",[t._v("This is based on wether or not it's for position, the driver and his personality and also most importantly the orders from it's team boss. What also counts is the session type, you don't want to be in the way on a slow lap in a lap based session.")]),t._v(" "),s("li",[t._v("a number will be put out, 0 is normal, -10 is a blue flag, -100 for a longer one")]),t._v(" "),s("li",[t._v("10 might be for when it's not a blue flag")])])]),t._v(" "),s("li",[t._v("The almost exact same counts for CarB but then attacking\n"),s("ol",[s("li",[t._v("-100 would only be from team orders or during a yellow flag, SC, w/e")])])])]),t._v(" "),s("p",[t._v("Now now check the distance from the car.")]),t._v(" "),s("ol",[s("li",[t._v("are they both way ahead of the corner?\n"),s("ol",[s("li",[t._v("do nothing")])])]),t._v(" "),s("li",[t._v("are they coming up to the braking point?\n"),s("ol",[s("li",[t._v("use the defense level to set the braking point for carF")]),t._v(" "),s("li",[t._v("use attack level to set the braking point for carB")]),t._v(" "),s("li",[t._v("Check if CarB will brake later than carF\n"),s("ol",[s("li",[t._v("Give by how far to both drivers and let them decide what to do (attack, move to inside, or defend, move to inside too)")])])]),t._v(" "),s("li",[t._v("if blue flag move CarF braking point slightly back.")])])]),t._v(" "),s("li",[t._v("Are they past the braking point and right before turn in point?\n"),s("ol",[s("li",[t._v("Are they alongside each other?\n"),s("ol",[s("li",[t._v("One will back out (often the one on the outside)")]),t._v(" "),s("li",[t._v("They both commit\n"),s("ol",[s("li",[t._v("based on risk of corner\n"),s("ol",[s("li",[t._v("crash")])])]),t._v(" "),s("li",[t._v("slight contact maybe a puncture or bodywork damage")]),t._v(" "),s("li",[t._v("car on outside gets forced off")]),t._v(" "),s("li",[t._v("both continue next to each other")]),t._v(" "),s("li",[t._v("both go wide and lose time")])])])])])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);